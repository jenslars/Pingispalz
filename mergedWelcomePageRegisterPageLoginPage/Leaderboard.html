<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
        <title>Welcome Pingispals!</title>
        <link rel="icon" type="image/x-icon" href="images/PingisPalsSmallIcon.png">
        <link href="styleLeaderboard.css" rel="stylesheet"> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100;200&family=Playfair+Display&display=swap" rel="stylesheet">
</head>
<body>
    <div class="grid">
        <div class="sidebar"> 
            <h3> Pingispals </h3>
            <img src="search.png">
            <input type="text" placeholder="Search..">
            <ul>
                <li><img src="user.png" alt="profile image"> Profile </li>
                <li><img src="friends.png" alt="friends iamge"> Friends </li>
                <li><img src="pingpong.png" alt="racket image"> Games </li>
                <li><img src="podium.png" alt="graph image"> Tournament </li>
                <li><img src="clubkey.png" alt="Club image"> Clubs </li>
            </ul>  
        </div>
        <div class="header"> 
            <h2> Malmo University </h2>
            <h3> Leaderboard </h3>
            <div id="topPlayers">
                <div id="top2"> 
                    
                </div>
                <div id="top1"> 
                    
                </div>
                <div id="top3"> 
                    
                </div>
            </div>
        </div>
        <div id="ranking"> 
            <table>
                <thead>
                    <tr>
                        <th id="placement"> Placement </th>
                        <th id="username"> Username </th>
                        <th id="wins"> Wins </th>
                        <th id="winRatio"> Win ratio </th>
                        <th id="elo"> Elo </th>
                        <th id="status"> Status </th>
                        <th id="play"> Play </th>
                    </tr>
                </thead>
                <tbody id="leaderboard"></tbody>
            </table>
        </div>
        <script>
            //Laddar in användare från databas in i leaderboarden
            function testLoadLeaderboard() {
                var xhr = new XMLHttpRequest();
                xhr.open("GET", "/leaderboard/score")
                xhr.setRequestHeader('Content-Type', 'application/json');
                xhr.send();
                xhr.onreadystatechange = function() {
                    console.log('hello world')
                    if (xhr.readyState === 4) {
                        if (xhr.status === 200) {
                            const response = xhr.response
                            console.log(xhr)
                            const ladder = document.getElementById('leaderboard');
                            ladder.innerHTML = '';
                            
                            JSON.parse(response).forEach(player => {
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td>${player.placement}</td>
                                <td>${player.username}</td>
                                <td>${player.wins}</td>
                                <td>${player.wins/player.losses}</td>
                                <td>${player.elo}</td>
                                <td>${player.status}</td>
                                <td><button>Play</button></td>
                            `;
                            ladder.appendChild(row);
                            });
                } else {
                }
                }
            };
            }
            testLoadLeaderboard()
        </script>
        <script src="leaderboardScript.js"></script>
    </div>
</body>
</html>
        